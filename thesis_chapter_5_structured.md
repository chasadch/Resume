# Chapter 5: Path Planning and Navigation

## 5.1 Introduction to QGroundControl-based Navigation

The navigation system represents a critical component of the autonomous drone architecture, enabling the platform to traverse environments efficiently while adhering to mission objectives and safety constraints. Rather than developing a completely custom navigation solution, this research leverages the proven capabilities of QGroundControl (QGC) as the foundation for mission planning and execution, extending it with custom modules for enhanced autonomous operation. This chapter details the design, implementation, and evaluation of the QGroundControl-based navigation system, including the hardware and software configuration, mission planning processes, real-time operation capabilities, and integration with custom obstacle avoidance algorithms. This approach directly addresses the practical gap identified in the literature review regarding standardized implementation methods for transitioning from research prototypes to operational systems, demonstrating how industry-standard tools can be extended to meet specific research requirements while maintaining compatibility with established workflows and validation procedures.

QGroundControl serves as an ideal foundation for the navigation system due to its comprehensive feature set and broad compatibility with common flight control systems. The platform offers several key advantages that support autonomous drone operations: a user-friendly interface with intuitive mission planning capabilities enables straightforward definition and modification of flight plans; robust MAVLink protocol implementation provides standardized communication between the ground station and the drone; real-time monitoring capabilities offer continuous visualization of telemetry, sensor data, and mission progress; integrated failsafe functionality establishes safety protocols for various contingencies; multi-vehicle support enables potential future expansion to coordinated drone operations. While QGroundControl provides extensive built-in functionality, it also presents certain limitations for fully autonomous research applications, including constrained customization of autonomous behaviors, limited integration with external perception systems, and restricted access to low-level control parameters. This research addresses these limitations through custom extensions that enhance QGroundControl's capabilities while maintaining compatibility with its core functionality, creating a robust navigation system that combines the reliability of established software with the flexibility required for autonomous research applications.

## 5.2 Hardware Setup for QGroundControl Integration

The hardware configuration supporting the QGroundControl-based navigation system spans both ground station and onboard components, creating a comprehensive infrastructure for mission planning and execution. The ground station hardware consists of a high-performance laptop (Intel i7 processor, 16GB RAM, NVIDIA GTX 1660Ti GPU) running Ubuntu 20.04 LTS, selected to provide sufficient computing power for the QGroundControl interface while maintaining portability for field operations. The primary communication link uses a 5.8GHz telemetry radio with 100mW transmission power, providing approximately 1km range under optimal conditions with a 115kbps data rate sufficient for telemetry and command transmission. A secondary 900MHz long-range radio with 20mW transmission power serves as a backup communication channel with reduced bandwidth but extended range (approximately 3km) and improved obstacle penetration characteristics. A dedicated 2.4GHz remote control system with failsafe capabilities provides manual override functionality when required, ensuring operator intervention capability in emergency situations. The onboard hardware includes the primary Pixhawk 4 flight controller responsible for basic stabilization and navigation functions, interfacing with the ground station through the telemetry links and with the companion computer through a dedicated UART connection. The Jetson Xavier NX companion computer, detailed in Chapter 3, handles higher-level autonomous functions including perception processing and custom navigation extensions, communicating with QGroundControl through MAVROS, a ROS2 package that bridges between MAVLink and the robot operating system environment.

## 5.3 Software Configuration for Navigation

The software configuration establishes the communication and control relationships between system components, integrating QGroundControl with custom extensions and onboard processing capabilities. The ground station runs QGroundControl version 4.2.3 with custom plugins developed to enhance autonomous functionality, including modifications to the mission planning interface to support advanced path specification and integration with the perception system. Communication settings configure the MAVLink connection parameters, including heartbeat rates (1Hz), telemetry update frequencies (10Hz for critical parameters, 2Hz for secondary information), transmission protocols (MAVLink 2.0 with signing enabled for security), and link quality monitoring thresholds. Vehicle parameters stored in the flight controller determine operational characteristics including maximum velocity (8m/s), acceleration limits (2m/sÂ²), geofence boundaries (variable by mission with typical values of 500m horizontal radius, 120m maximum altitude), return-to-home behaviors (automatic activation on communication loss exceeding 5 seconds), and default failsafe responses. Custom parameters extend the standard set to include perception system integration settings, obstacle avoidance sensitivity thresholds, and path modification constraints. The onboard software stack includes the PX4 flight controller firmware (version 1.13.0) with applied modifications to enhance external control authority and improve communication with the companion computer. The companion computer runs Ubuntu 20.04 with ROS2 Foxy, executing custom nodes for perception integration, local path modification, and autonomous decision-making that complement QGroundControl's mission management capabilities.

## 5.4 Mission Planning Process

The mission planning process represents the first phase of navigation operations, establishing the flight plan that guides autonomous execution. QGroundControl provides an intuitive interface for defining missions through waypoint specification on satellite imagery or custom maps. The pre-flight planning procedure begins with area selection and map preparation, importing relevant geographical information, no-fly zones, and operational boundaries. Waypoint definition follows a hierarchical approach, beginning with primary mission objectives that establish the core purpose and destination points, supplemented by intermediate waypoints that define the specific path. Each waypoint contains position coordinates (latitude, longitude, and altitude), approach velocity parameters, loiter or hover duration if required, and conditional actions such as camera triggers or sensor activation commands. Advanced mission items extend basic waypoint functionality with specialized behaviors including survey patterns for systematic area coverage, spline paths for smooth trajectory following, and region-of-interest points that maintain sensor orientation toward specific targets during flight. Mission validation performs comprehensive pre-flight checks including path feasibility verification (ensuring waypoints respect vehicle performance limits), geofence compliance confirmation (validating that the entire route remains within authorized areas), altitude clearance analysis (maintaining safe separation from terrain and known obstacles), and battery endurance calculation (confirming sufficient energy reserves for the planned mission plus contingency margin).

## 5.5 Survey Pattern Generation

Survey pattern generation represents a specialized aspect of mission planning, enabling systematic coverage of defined areas for mapping, inspection, or search operations. QGroundControl's survey planning tool allows specification of a polygon region on the map, automatically generating a series of parallel transects that ensure complete coverage. Survey configuration parameters include transect spacing (typically set to 80% of the camera field of view width to ensure image overlap), flight altitude (balancing coverage area against image resolution requirements), camera parameters (determining image footprint size), and flight pattern options (lawn-mower, spiral, or perimeter patterns depending on mission requirements). For infrastructure inspection missions, custom extensions to QGroundControl's survey planner generate specialized patterns that follow structural contours while maintaining consistent standoff distance and sensor orientation, enabling detailed examination of bridges, buildings, or towers. The custom survey enhancement module integrates terrain elevation data to maintain consistent height above ground across varying topography, adjusting altitude commands to follow terrain contours rather than maintaining a fixed absolute altitude. All generated survey patterns undergo the same validation procedures as manually created waypoint missions, ensuring feasibility and safety before deployment to the drone.

## 5.6 Real-time Operation

Real-time operation during mission execution involves continuous monitoring and dynamic decision-making to adapt to changing conditions while maintaining mission objectives. QGroundControl provides a comprehensive monitoring interface displaying current vehicle status including position (shown on both 2D maps and 3D visualizations), attitude and velocity vectors, battery state (voltage, current draw, and remaining capacity estimation), sensor data (including camera feeds when bandwidth permits), and mission progress (completed and upcoming waypoints with estimated arrival times). Custom extensions enhance this monitoring with additional visualization of perception system outputs, displaying detected obstacles with classification information and confidence metrics overlaid on the map and camera views. Dynamic updates during flight allow mission modifications in response to new information or changing requirements. The operator can adjust waypoint positions, add or remove mission segments, modify flight parameters such as velocity or altitude, and reprioritize objectives while the mission is in progress. These changes are transmitted to the drone through the MAVLink protocol, where they are validated against current constraints before implementation. Automated updates can also be triggered by onboard systems in response to detected conditions, such as rerouting around newly identified obstacles or adjusting survey patterns to investigate areas of interest detected during the initial scan.

## 5.7 Failsafe Integration

Failsafe integration represents a critical aspect of the navigation system, ensuring safe operation even when problems occur. QGroundControl manages a comprehensive set of failsafe mechanisms triggered by specific conditions: communication loss initiates a tiered response beginning with hover-in-place for short interruptions (less than 5 seconds), followed by return-to-home navigation for extended outages; battery critical levels trigger either return-to-home or land-in-place behaviors depending on remaining capacity and distance from launch point; geofence breaches cause immediate flight termination if the drone attempts to exit authorized areas; sensor failures activate degraded mode operations, limiting flight capabilities to those that can be safely executed with remaining functional systems. Custom extensions to the failsafe system integrate perception-based triggers, including excessive obstacle density detection that initiates holding patterns until operator intervention, classification-specific responses that implement different behaviors based on the type of obstacle detected (such as immediate ascent when power lines are identified), and confidence-based decision making that adjusts flight parameters when perception reliability decreases. The failsafe system implements a priority hierarchy that resolves potential conflicts between multiple triggered responses, generally prioritizing immediate safety concerns (such as collision avoidance) over mission objectives or communication maintenance.

## 5.8 Integration with Custom Obstacle Avoidance

Integration with the custom obstacle avoidance system represents the most significant enhancement to QGroundControl's standard functionality, enabling reactive modification of planned paths in response to detected obstacles. The local path modification system operates as an intermediary layer between QGroundControl's global mission plan and the flight controller's trajectory execution. When the perception system detects obstacles along the planned path, the avoidance algorithm generates alternative trajectories that maintain progress toward the next waypoint while ensuring safe clearance from obstacles. The integration architecture maintains QGroundControl's authority over the global mission plan while allowing the onboard avoidance system to make local adjustments within defined constraints. Communication between systems follows a hierarchical approach: QGroundControl transmits the complete mission plan to the companion computer; the local planning node receives current perception data and generates clearance corridors around detected obstacles; the trajectory optimization module calculates the minimum-deviation path that respects these corridors while making progress toward mission objectives; the resulting modified trajectory is transmitted to the flight controller as a series of high-frequency setpoints that override the direct waypoint-to-waypoint navigation while maintaining alignment with the overall mission plan. This architecture enables smooth, continuous avoidance behaviors without requiring constant communication with the ground station, maintaining safe operation even during temporary telemetry outages.

## 5.9 Performance Analysis

The performance of the QGroundControl-based navigation system was evaluated across multiple metrics to assess its effectiveness for autonomous drone operations. Mission execution accuracy measures the deviation between planned and actual flight paths under various conditions, with results showing mean cross-track error of 0.4m in normal operation and maximum deviations of 1.2m during active obstacle avoidance maneuvers. Path optimality analysis compares the efficiency of executed paths against theoretical optimal trajectories, revealing that the integrated system achieves 92% path efficiency on average, with lower values (approximately 85%) in complex environments requiring significant obstacle avoidance. Computational performance assessment confirms that the navigation system operates within the resource constraints of the onboard hardware, with the primary path planning node utilizing an average of 12% CPU on the companion computer and the local trajectory modification algorithms requiring 8-15% CPU depending on obstacle density. Communication robustness testing verified successful operation with packet loss rates up to 25% and temporary communication outages up to 15 seconds, demonstrating the system's resilience to challenging field conditions.

The system demonstrates excellent compatibility with the perception and obstacle avoidance modules, successfully integrating detection information into path modifications with update rates of 10Hz and response latency averaging 180ms from initial obstacle detection to trajectory adjustment. Performance in specific mission types varies according to the operational challenges, with mapping missions achieving 98% coverage accuracy, inspection missions maintaining target standoff distance within Â±0.3m of specified values, and transit missions completing objectives with 95% success rate across varied environments. These results validate the effectiveness of the QGroundControl-based approach, confirming that the integration of standardized tools with custom extensions creates a robust foundation for autonomous navigation while maintaining compatibility with established operational practices.

## 5.10 Limitations and Future Improvements

Despite the system's strong performance, certain limitations were identified during testing that suggest directions for future improvement. Current limitations include reduced effectiveness in extremely dense obstacle environments due to the reactive nature of the local path modification approach; communication bandwidth constraints that restrict real-time transmission of high-resolution perception data to the ground station; limited integration with external data sources such as weather services or air traffic information; and dependency on GPS for global positioning, creating challenges in GPS-denied environments. The path planning system also shows increased computational requirements when handling large numbers of waypoints (>100) or complex survey patterns, potentially affecting performance on extended missions.

Planned improvements address these limitations through several approaches: enhanced global-local planning integration will strengthen the coordination between QGroundControl's mission management and onboard path modification, improving behavior in complex environments; predictive obstacle mapping techniques will transition the system from purely reactive avoidance to anticipatory planning based on environmental models; multi-modal positioning integration will reduce GPS dependency by incorporating visual-inertial odometry and landmark recognition; and compression algorithms for perception data will improve ground station visualization without exceeding communication constraints. Additional planned enhancements include automatic mission generation based on high-level objectives, adaptive path optimization that considers energy consumption and sensor coverage requirements, and improved handling of dynamic obstacles through trajectory prediction. These improvements will extend the capabilities of the QGroundControl-based navigation system while maintaining its fundamental advantages of reliability, standardization, and operational compatibility. 